install:
	pip3 install requirements.txt

download_cve: dl_cve 

fedora: dl_fedora_vuln_reports dl_fedora_bugs dl_fedora_advisories 

debian:dl_debian_vuln_reports dl_debian_pkgs dl_debian_bugs dl_debian_advisories

dl_cve:
	$(info Starting to download cve records...)
	python3 cve.py fetch cve
dl_fedora_vuln_reports:
	python3 fedora.py fetch vuln_reports

dl_debian_vuln_reports:
	git clone https://salsa.debian.org/security-tracker-team/security-tracker.git security-tracker
	cd security-tracker ; git log --before="2020-1-01" --date=format:'%Y-%m-%dT%H:%M:%S' --pretty=format:'%h|%cd|%an|%ae' --no-merges > log.txt ; cd -
	{ echo 'hash|commit_time|author_name|author_email'; cat security-tracker/log.txt; } > /tmp/$$ && mv /tmp/$$ deb_sec_tracker.csv
	
	python3 debian.py fetch vuln_reports
	rm -rf security-tracker

dl_fedora_bugs:
	$(info Starting to download bugs from Fedora...)
	python3 fedora.py fetch bugs

dl_fedora_advisories:
	$(info Starting to download advisories from Fedora...)
	python3 fedora.py fetch advisories

dl_debian_pkgs:
	$(info Starting to download packages from Debian...)
	python3 debian.py fetch pkgs
dl_debian_bugs:
	$(info Starting to download bugs from Debian...)
	python3 debian.py fetch bugs

dl_debian_advisories:
	$(info Starting to download advisories from Debian...)
	python3 debian.py fetch advisories